<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Permission Delegation To Embedded Web Applications</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     -> <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure);  }
 *        .example::before { content: "Example " counter(example); }
 *        .issue::before   { content: "Issue "   counter(issue);   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

	div.head .logo {
		float: right;
		margin: 0;
	}

	@media screen {
		div.head .logo > a {
			display: inline-block;
			margin: 0.4rem 0 0.2rem .4rem;
		}

		div.head img[src*="logos/W3C"] {
			display: block;
			border: solid #1a5e9a;
			border-width: .65rem .7rem .6rem;
			border-radius: .4rem;
			background: #1a5e9a;
			color: white;
			font-weight: bold;
		}

		div.head a:hover > img[src*="logos/W3C"],
		div.head a:focus > img[src*="logos/W3C"] {
			background: #457cad;
			border-color: #457cad;
		}

		div.head a:active > img[src*="logos/W3C"] {
			background: #c00;
			border-color: #c00;
		}
	}


	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head > p:first-child > a {
		border: none;
		text-decoration: none;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue); } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example); } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		width: 100%;
		border: hidden;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1em;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-style:  italic; }
	.toc > li li li li    { font-style:  normal; }
	.toc > li li li li li { font-style:  italic;
	                        font-size:   85%;    }

	.toc > li             { margin: 1.5em 0;     }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2em;
	                        margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	:not(li) > .toc {
		margin-left: 5em;
	}

	.toc .secno {
		float: left;
		width: 4em;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; -webkit-columns: 15em; -moz-columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}

/******************************************************************************/
/*                                  Bikeshed                                  */
/******************************************************************************/

	/* Style for paragraphs I know are in MD-genned lists */
	/* This is a weird hack for me not yet following the commonmark spec
	   regarding paragraph and lists. */
	[data-md] > :first-child {
		margin-top: 0;
	}
	[data-md] > :last-child {
		margin-bottom: 0;
	}

/** Inline CSS fragments ******************************************************/

	.css.css, .property.property, .descriptor.descriptor {
		color: #005a9c;
		font-size: inherit;
		font-family: inherit;
	}
	.css::before, .property::before, .descriptor::before {
		content: "‘";
	}
	.css::after, .property::after, .descriptor::after {
		content: "’";
	}
	.property, .descriptor {
		/* Don't wrap property and descriptor names */
		white-space: nowrap;
	}
	.type { /* CSS value <type> */
		font-style: italic;
	}
	pre .property::before, pre .property::after {
		content: "";
	}

/** Autolinks produced using Bikeshed *****************************************/

	[data-link-type="property"]::before,
	[data-link-type="propdesc"]::before,
	[data-link-type="descriptor"]::before,
	[data-link-type="value"]::before,
	[data-link-type="function"]::before,
	[data-link-type="at-rule"]::before,
	[data-link-type="selector"]::before,
	[data-link-type="maybe"]::before {
		content: "‘";
	}
	[data-link-type="property"]::after,
	[data-link-type="propdesc"]::after,
	[data-link-type="descriptor"]::after,
	[data-link-type="value"]::after,
	[data-link-type="function"]::after,
	[data-link-type="at-rule"]::after,
	[data-link-type="selector"]::after,
	[data-link-type="maybe"]::after {
		content: "’";
	}

	[data-link-type].production::before,
	[data-link-type].production::after,
	.prod [data-link-type]::before,
	.prod [data-link-type]::after {
		content: "";
	}

	[data-link-type=element],
	[data-link-type=element-attr] {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
		font-size: .9em;
	}
	[data-link-type=element]::before { content: "<" }
	[data-link-type=element]::after  { content: ">" }

	[data-link-type=biblio] {
		white-space: pre;
	}

/** Self-Links ****************************************************************/
/* Auto-generated links from an element to its own anchor, for usability */

	.heading, .issue, .note, .example, li, dt {
		position: relative;
	}
	a.self-link {
		position: absolute;
		top: 0;
		left: calc(-1 * (3.5rem - 26px));
		width: calc(3.5rem - 26px);
		height: 2em;
		text-align: center;
		border: none;
		transition: opacity .2s;
		opacity: .5;
	}
	a.self-link:hover {
		opacity: 1;
	}
	.heading > a.self-link {
		font-size: 83%;
	}
	dfn > a.self-link {
		top: auto;
		left: auto;
		opacity: 0;
		width: 1.5em;
		height: 1.5em;
		background: gray;
		color: white;
		font-style: normal;
		transition: opacity .2s, background-color .2s, color .2s;
	}
	dfn:hover > a.self-link {
		opacity: 1;
	}
	dfn > a.self-link:hover {
		color: black;
	}

	a.self-link::before            { content: "¶"; }
	.heading > a.self-link::before { content: "§"; }
	dfn > a.self-link::before      { content: "#"; }

/** Counters ******************************************************************/
/* Adds the auto-genned issue/example counters,
   until Bikeshed fills in manual ones. */
	.issue:not(.no-marker)::before {
		content: "Issue " counter(issue);
	}

	.example:not(.no-marker)::before {
		content: "Example";
		content: "Example " counter(example);
	}
	.invalid.example:not(.no-marker)::before,
	.illegal.example:not(.no-marker)::before {
		content: "Invalid Example";
		content: "Invalid Example" counter(example);
	}



/********************************************
 Remember to remove the logo section when copypasting freshly.
 */
</style>
  <meta content="Bikeshed 1.0.0" name="generator">
<style>
        .dfn-panel {
            display: inline-block;
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel > span { display: list-item; list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: .5em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="http://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Permission Delegation To Embedded Web Applications</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2016-03-18">18 March 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://github.com/noncombatant/permission-delegation-api">https://github.com/noncombatant/permission-delegation-api</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Bpermission-delegation%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[permission-delegation] <i data-lt="">… message topic …</i></kbd>”</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/noncombatant/permission-delegation-api/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Raymes Khoury</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Chris Palmer</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dt>Participate:
     <dd><span><a href="https://github.com/noncombatant/permission-delegation-api">We are on Github.</a></span>
     <dd><span><a href="https://github.com/noncombatant/permission-delegation-api/issues">File a bug.</a></span>
     <dd><span><a href="https://github.com/noncombatant/permission-delegation-api/commits/gh-pages">Commit history.</a></span>
     <dd><span><a href="http://lists.w3.org/Archives/Public/public-webappsec/">Mailing list.</a></span>
     <dt>Implementation status:
     <dd><span><a href="http://crbug.com/new">Blink/Chromium</a></span>
     <dd><span><a href="TODO">Gecko</a></span>
     <dd><span></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This document proposes a recommendation for how UAs should manage access to permissions in applications built from cross-origin components. We recommend that UAs only allow permissions to be granted to embedded applications via explicit delegation from the embedding application.</p>
   <p>We describe a web platform API for delegating permissions to embedded applications. This API allows a web application to explicitly delegate and un-delegate permissions that it holds to cross-origin embedded applications. It also allows a web application to query the status of delegation to an embedded application.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong> </p>
   <p> The (<a href="http://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list <a href="mailto:public-webappsec@w3.org?Subject=%5Bpermission-delegation%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> (see <a href="http://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “permission-delegation” in the subject,
	preferably like this:
	“[permission-delegation] <em>…summary of comment…</em>” </p>
   <p> This document was produced by the <a href="http://www.w3.org/2011/webappsec/">Web Application Security Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/49309/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="http://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#definitions"><span class="secno">1</span> <span class="content">Definitions</span></a>
    <li><a href="#background-and-motivations"><span class="secno">2</span> <span class="content">Background And Motivations</span></a>
    <li><a href="#permission-restrictions-for-embedded-web-applications"><span class="secno">3</span> <span class="content">Permission Restrictions For Embedded Web Applications</span></a>
    <li>
     <a href="#delegating-permissions"><span class="secno">4</span> <span class="content">Delegating Permissions</span></a>
     <ol class="toc">
      <li><a href="#delegation-via-the-declarative-api"><span class="secno">4.1</span> <span class="content">Delegation Via The Declarative API</span></a>
      <li><a href="#delegation-via-the-imperative-api"><span class="secno">4.2</span> <span class="content">Delegation Via The Imperative API</span></a>
     </ol>
    <li><a href="#examples"><span class="secno">5</span> <span class="content">Examples</span></a>
    <li><a href="#security-considerations"><span class="secno">6</span> <span class="content">Security Considerations</span></a>
    <li>
     <a href="#other-risks"><span class="secno">7</span> <span class="content">Other Risks</span></a>
     <ol class="toc">
      <li><a href="#compatibility"><span class="secno">7.1</span> <span class="content">Compatibility</span></a>
      <li><a href="#changing-embedee-permissions"><span class="secno">7.2</span> <span class="content">Changing Embedee Permissions</span></a>
      <li><a href="#reduced-user-control"><span class="secno">7.3</span> <span class="content">Reduced User Control</span></a>
     </ol>
    <li><a href="#acknowledgements"><span class="secno">8</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="definitions"><span class="secno">1. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
    <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="powerful feature" data-noexport="" id="powerful-feature">powerful feature<span class="dfn-panel" data-deco=""><b><a href="#powerful-feature">#powerful-feature</a></b><b>Referenced in:</b><span><a href="#ref-for-powerful-feature-1">4. Delegating Permissions</a></span></span></dfn> is a web platform feature or API that allows an
origin to have access to information the user may consider security- or
privacy-sensitive, or access to pwoerful sensors on the platform the UA runs on,
such as the camera or microphone.</p>
    <p>A <dfn data-dfn-type="dfn" data-noexport="" id="permission">permission<a class="self-link" href="#permission"></a></dfn>, generally, is an affordance in the UA to allow,
deny, throttle, or otherwise regulate access to a powerful feature that the
user, through the UA, may grant to the web origin. Examples of powerful features
include <a data-link-type="biblio" href="#biblio-geolocation-api">[geolocation-API]</a> and the <code>getUserMedia</code> API from <a data-link-type="biblio" href="#biblio-webrtc">[webrtc]</a>.</p>
    <p>An <dfn data-dfn-type="dfn" data-noexport="" id="embedder">embedder<a class="self-link" href="#embedder"></a></dfn> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a> that includes a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context">nested
browsing context</a>. An <dfn data-dfn-type="dfn" data-noexport="" id="embedee">embedee<a class="self-link" href="#embedee"></a></dfn> is a Document contained
within the nested browsing context of an embedder. Typically, an embedder would
include an embedee using an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a></code> element. A <dfn data-dfn-type="dfn" data-noexport="" id="top-level-embedder">top-level
embedder<a class="self-link" href="#top-level-embedder"></a></dfn> is an embedder loaded in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>.</p>
    <p>An embedder can <dfn data-dfn-type="dfn" data-noexport="" id="delegate">delegate<a class="self-link" href="#delegate"></a></dfn> permissions it holds to its embedee(s),
thus allowing the embedee to use the powerful feature to which the permission
grants access. Similarly, an embedder can <dfn data-dfn-type="dfn" data-noexport="" id="undelegate">undelegate<a class="self-link" href="#undelegate"></a></dfn> (revoke) a
permission from an embedee.</p>
    <p>Applications built from an embedder and 1 or more embedees from different
origins are <dfn data-dfn-type="dfn" data-noexport="" id="composed-applications">composed applications<a class="self-link" href="#composed-applications"></a></dfn>.</p>
   </section>
   <section class="informative">
    <h2 class="heading settled" data-level="2" id="background-and-motivations"><span class="secno">2. </span><span class="content">Background And Motivations</span><a class="self-link" href="#background-and-motivations"></a></h2>
    <p>Web applications are able to request permissions, such as geolocation, using
various APIs on the web platform. Many UAs will defer the decision to the user,
prompting the user to make a decision about the permission (e.g. Allow, Deny,
satisfy the request using a particular input source, et c.). Thus the user has
some control over the capabilities they grant to a requesting origin. Many UAs
will persist the user’s decisions, so that the user will not have to make a
decision for subsequent access requests.</p>
    <p>Web applications are composable: one web application (the embedder) can embed
others (embedees) by using the <code>&lt;iframe></code> HTML tag. If a
cross-origin embedee request permissions, it can be problematic from the
perspective of both the user and the embedder. There are 4 reasons for this:</p>
    <ol>
     <li>People don’t have a good understanding of permission requests from embedees.
There is often no UI in the UA indicating that embedees are present or what
their origin is. They may even be invisible on a page. It is not easy to
communicate the concept of composed applications to people using the web. The
results of a user study <a data-link-type="biblio" href="#biblio-iframe-permissions-study">[iframe-permissions-study]</a> showed that participants
were generally confused about who they were granting access to when a permission
request came from an embedee.
     <li>It’s unclear how a UA should persist the permission decisions people make
for composed applications. Different UAs persist people’s decisions about
embedees in different ways. Some UAs associate the permission grant to the
combination of the embedder’s origin and the embedee’s origin, such that the UA
recalls the decision about the embedee’s permissions only when embedded in that
same embedder. Other UAs associate the grant only to the requesting origin,
regardless of whether and where it is embedded. Either mechanism is likely to
violate people’s expectations, at least some of the time. The inconsistency
across — and even within — UAs further exacerbates the problem.
     <li>It is difficult to build a permission management UI that people can
understand and use effectively. This is particularly true if UAs adhere
permission grants to a combination of the embedder’s and embedees’ origins. UI
surfaces for revocation and auditing must attempt to display multiple origins in
a way that people can understand.
     <li>Embedders currently have no way to regulate their embedees’ use of powerful
features. Embedees can thus behave in ways that reflect badly on the
embedder.
    </ol>
    <p></p>
    <p>To address these issues, we recommend that UAs require embedders to
explicitly delegate permissions to embedees, rather than allow embeddees to
unilaterally use or request to permissions. People would only ever be required
to make permission decisions about the <em>apparent</em> origin of the
application: that of the top-level embedder. The benefits of this, with relation
to the above problems, are:</p>
    <ol>
     <li>The user does not need to understand the nature of composed applications
because they only ever make decisions about the top-level origin.
     <li>It is clear how to persist user decisions: they are only ever stored for the
top-level origin.
     <li>Because decisions are only ever made about the top-level origin, it is much
easier to build permission management UI.
     <li>Because embedees cannot gain access on their own, embedders are able to
police their embedees.
    </ol>
    <p></p>
    <p>Note that there is a necessary trade-off between scoping permission
grants in as fine-grained a manner as possible versus scoping permission
grants at a level of granularity that people can understand. See <a href="#security-considerations">Security Considerations</a>.</p>
    <p>Permission delegation is already possible on the web platform. For
example, if a person has granted geolocation to an origin in a frame, the
origin can expose geolocation data to other, cross-origin frames via <code>postMessage</code> (among other mechanisms). This document describes a
new web platform API that enables embedders to delegate permissions in a way
that the UA can effectively mediate on behalf of users. In addition to
delegating access, the API also exposes means to revoke and query delegated
access. We intend for the API to be convenient to invoke and to afford
efficient implementations.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="permission-restrictions-for-embedded-web-applications"><span class="secno">3. </span><span class="content">Permission Restrictions For Embedded Web Applications</span><a class="self-link" href="#permission-restrictions-for-embedded-web-applications"></a></h2>
    <p>Before granting a permission to an embedee with a different origin than its
embedder, UAs MUST require that the embedder (a) hold that permission itself;
and (b) explicitly delegate the permission to the embedee using the API described in <a href="#delegating-permissions">Delegating Permissions</a>. </p>
    <p>In cases where an embedder has not (yet) delegated a permission, the UA MUST
prevent the embedee from triggering permission prompts to the user, and the UA
SHOULD prevent the embedee from acquiring any permissions based on a prior
decision made by the user.</p>
    <p>UAs SHOULD apply these restrictions to all existing and future permissions
defined in the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#permission-registry">PermissionName</a></code> enum.</p>
    <p>As an exception to the above restrictions, embedees MUST be able to access
permissions that are granted to their associated <a data-link-type="dfn" href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/#dfn-service-worker">service worker</a>. These
permissions can be trivially accessed by communicating with the service worker
so there is no need to require delegation.</p>
    <p>UAs MAY also allow cross-origin embedees to acquire permission grants through
the use of advanced user configurations, such as custom whitelists (see <a href="#reduced-user-control">Reduced User Control</a> for further
discussion).</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="delegating-permissions"><span class="secno">4. </span><span class="content">Delegating Permissions</span><a class="self-link" href="#delegating-permissions"></a></h2>
    <p>There are 2 ways for an embedder to delegate permission grants to an embedee:
A declarative syntax in the HTML tag that instantiates the embedee; and an
imperative syntax that extends the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#permissions-interface">Permissions</a></code> interface. These are
described below.</p>
    <p>To delegate a permission to an embedee, an embedder MUST meet the following
conditions:</p>
    <ol>
     <li>The embedder and embedee MUST both meet the minimum security requirements to
ask for the permission in the first place. For a <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-1">powerful feature</a>, such
as <code>getUserMedia</code>, this requires that both embedder and embedee be
running in a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>. Not all features require that the
calling origin be in a privileged context or meet other safety standards. But
for those that do, the embedder must meet the requirements before being able to
delegate permission to an embedee, and the embedee must also meet the
requirements.
     <li>The embedder itself MUST access to the permission, or must request it of the
user.
    </ol>
    <p></p>
    <p>The lifetime of the embedees access to the permission MUST be tied to the
lifetime of the embedders access to the permission. That is, the embedee will
only get access to the permission when the embedder has access and will lose
access if the embedder loses access.</p>
    <p>Note that an embedder MUST still be able to ask for a permission to be
delegated even before it has access to use the permission itself. In cases like
this, a request to use the permission by the embedee SHOULD trigger an automatic
request to use the permission on behalf of the embedder. This allows embedees to
acquire access to permissions without embedders having to acquire access up
front.</p>
    <p>If an embedee performs a cross-origin navigation the permission MUST be
implicitly un-delegated and the embedee will lose access. This prevents
unintentionally delegating access to other origins.</p>
    <section>
     <h3 class="heading settled" data-level="4.1" id="delegation-via-the-declarative-api"><span class="secno">4.1. </span><span class="content">Delegation Via The Declarative API</span><a class="self-link" href="#delegation-via-the-declarative-api"></a></h3>
     <p>The permissions attribute is defined on the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a></code> element.</p>
<pre class="idl def">partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmliframeelement">HTMLIFrameElement</a> {
  [PutForwards=<a class="idl-code" data-link-type="attribute" href="https://dom.spec.whatwg.org/#dom-domtokenlist-value">value</a>] readonly attribute <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#domtokenlist">DOMTokenList</a> <dfn class="idl-code" data-dfn-for="HTMLIFrameElement" data-dfn-type="attribute" data-export="" data-readonly="" data-type="DOMTokenList " id="dom-htmliframeelement-permissions">permissions<a class="self-link" href="#dom-htmliframeelement-permissions"></a></dfn>;
};
</pre>
     <p>The permissions attribute, when specified, will delegate the given set of
permissions to the embedee running in the iframe. Its value must be an unordered
set of unique space-separated tokens that are ASCII case-insensitive. The
allowed values are the permission names that come from the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#permission-registry">PermissionName</a></code> enum.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.2" id="delegation-via-the-imperative-api"><span class="secno">4.2. </span><span class="content">Delegation Via The Imperative API</span><a class="self-link" href="#delegation-via-the-imperative-api"></a></h3>
     <p>The <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#permissions-interface">Permissions</a></code> interface is extended to provide functions for
delegating and undelegating permissions as well as querying the delegation
status.</p>
<pre class="idl def">[Exposed=(Window,Worker)]
partial interface <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/permissions/#permissions-interface">Permissions</a> {
  Promise&lt;void> <dfn class="idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="delegate(permission)" id="dom-permissions-delegate">delegate<a class="self-link" href="#dom-permissions-delegate"></a></dfn>((<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a> or sequence&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a>>) <dfn class="idl-code" data-dfn-for="Permissions/delegate(permission)" data-dfn-type="argument" data-export="" id="dom-permissions-delegate-permission-permission">permission<a class="self-link" href="#dom-permissions-delegate-permission-permission"></a></dfn>);
  Promise&lt;void> <dfn class="idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="undelegate(permission)" id="dom-permissions-undelegate">undelegate<a class="self-link" href="#dom-permissions-undelegate"></a></dfn>((<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a> or sequence&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a>>) <dfn class="idl-code" data-dfn-for="Permissions/undelegate(permission)" data-dfn-type="argument" data-export="" id="dom-permissions-undelegate-permission-permission">permission<a class="self-link" href="#dom-permissions-undelegate-permission-permission"></a></dfn>);
  Promise&lt;boolean> <dfn class="idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="isDelegated(permission)" id="dom-permissions-isdelegated">isDelegated<a class="self-link" href="#dom-permissions-isdelegated"></a></dfn>(<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/isDelegated(permission)" data-dfn-type="argument" data-export="" id="dom-permissions-isdelegated-permission-permission">permission<a class="self-link" href="#dom-permissions-isdelegated-permission-permission"></a></dfn>);
};
</pre>
     <p>When called with these functions <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a></code> must contain a
field which specifies the embedee:</p>
     <dl class="idl" title="dictionary PermissionDescriptor">
      <dt>required PermissionName <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-doctype-name">name</a>
      <dt>HTMLIframeElement embedee
     </dl>
     <p>The embedee specified must be nested in the caller’s browsing context
otherwise the request for delegation will be rejected.</p>
     <p>Calling delegate will cause the given permissions to be delegated to their
embedees. The promise returned will resolve if the permission is successfully
delegated, otherwise it will be rejected. Similarly, undelegate will cause the
given permissions to no longer be delegated to the embedees.</p>
     <p>The isDelegated function returns a promise which will resolve to true if the
permission is delegated to the given frame or to false otherwise.</p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="examples"><span class="secno">5. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
    <p>Consider an embedder https://restaurant.example.net whose developers want to
show a map on the page that enables people to get directions to the restaurant.
They can do so by instantiating an iframe to the maps service
https://maps.example.com, and by explicitly delegating the <var>geolocation</var> permission: </p>
<pre class="example highlight" id="example-c185cfa5"><a class="self-link" href="#example-c185cfa5"></a>&lt;iframe id="embedee" src="https://maps.example.com/" permissions="geolocation">&lt;/iframe>
</pre>
    <p>Consider next that the developers of https://restaurant.example.net learn of
a new feature that https://maps.example.com provides, which is to send people
notifications <a data-link-type="biblio" href="#biblio-whatwg-notifications">[notifications]</a> when it’s time to leave to get to their
destination on time. For example, people may want to know not just the
directions to the restaurant, but also to be notified when they should leave to
make it by the time their reservation starts. The developers would explicitly
grant the embedded iframe a second permission, <var>notifications</var>:</p>
<pre class="example highlight" id="example-d460f294"><a class="self-link" href="#example-d460f294"></a>&lt;iframe id="embedee" src="https://maps.example.com/" permissions="geolocation notifications">&lt;/iframe>
</pre>
    <p>Delegation via the imperative API:</p>
<pre class="example highlight" id="example-27878b4c"><a class="self-link" href="#example-27878b4c"></a>var iframe = document.getElementById('embedee');
navigator.permissions.delegate({embedee: iframe, name: 'geolocation'}).then(
  function() {
    // Delegated geolocation.
  }).catch(function() {
    // Delegation failed.
  });
</pre>
    <p>Undelegating permissions:</p>
<pre class="example highlight" id="example-f6314ecb"><a class="self-link" href="#example-f6314ecb"></a>var iframe = document.getElementById('embedee');
navigator.permissions.undelegate({embedee: iframe, name: 'geolocation'});
</pre>
    <p>Checking whether permission is delegated:</p>
<pre class="example highlight" id="example-e69546ed"><a class="self-link" href="#example-e69546ed"></a>var iframe = document.getElementById('embedee');
navigator.permissions.isDelegated({embedee: iframe, name: 'geolocation'})
  .then(function(result) {
    // result === true
  });
</pre>
   </section>
   <section class="informative">
    <h2 class="heading settled" data-level="6" id="security-considerations"><span class="secno">6. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
    <p>The most obvious downside of this proposal is that it breaks the principle of
least privilege. In particular, an embedee can’t get access to a permission
without the top-level embedder also getting access to the permission. Thus, the
permission grant is broader than is strictly necessary.</p>
    <p>For example, consider an airline ticketing site (https://example.air) that
embeds a payment processor site (https://example.cc) in an iframe. To better
authenticate or verify the purchase of tickets, example.cc requests access to
the UA’s geolocation API. Under this proposal, the user would have to grant
geolocation API access to the example.air origin, which would then delegate the
power to example.cc. The grant would adhere, perhaps persistently, to
example.air — regardless of what other origins it may embed — rather than to
example.cc.</p>
    <p>We could extend this scenario to a potentially more problematic case in which
a less trustworthy site (https://example.suspicious) also allows purchases and
embeds an example.cc frame for credit card verification. Now the user has to
give access to their location to example.suspicious as well as to example.cc to
complete their purchase. Obviously, this is not ideal.</p>
    <p>Conversely, if embedees can directly request access to powerful features
(currently the case in many UAs), people may not understand where the request
comes from — although example.air is a composed application, people are often
unaware that web applications can be composed of an embedder and potentially
several embedees. Thus, when an embedee requests a permission grant, the person
may not have any context for or understanding of what the UA is asking them. We
believe that people perceive the top-level site as the ‘active application’ — if
they perceive any ‘active application’ at all. Thus, we believe that if there is
any chance for an origin to be or provide context for a permission request, it
is the top-level, embedder origin.</p>
    <p>Additionally, embedees can take advantage of this confusion, and request
permissions (or otherwise cost the person’s attention) in ways that disrupt the
trust relationship between the person and the top-level embedder origin.</p>
    <p>This proposal puts the onus on the embedder, which has chosen to embed its
embedees, to state the value proposition for the permission grant and to
establish a relationship with the person using the application. It also enables
and incentivizes embedders to ‘police’ their embedees in order to remain
trustworthy.</p>
   </section>
   <section class="informative">
    <h2 class="heading settled" data-level="7" id="other-risks"><span class="secno">7. </span><span class="content">Other Risks</span><a class="self-link" href="#other-risks"></a></h2>
    <section>
     <h3 class="heading settled" data-level="7.1" id="compatibility"><span class="secno">7.1. </span><span class="content">Compatibility</span><a class="self-link" href="#compatibility"></a></h3>
     <p>This document specifies breaking changes to the web platform. Namely,
embedees that were once able to request and acquire permissions will no longer
be able to do so. In order to restore functionality, embedders need to change
their iframe tags to specify which permissions they wish to delegate. Usage of
permissions from embedees is currently very low (see <a data-link-type="biblio" href="#biblio-iframe-permissions-chrome">[iframe-permissions-chrome]</a>), so the impact of this change should be small. It
is recommended that UAs communicate this change with developers prior to
implemenation in order to minimize the impact of the change. This can be done
through the use of console warning messages or other channels.</p>
     <p>The upside of this breakage is that any harmful or annoying permission
requests from embedees, which website owners did not intend their users to be
exposed to will be prevented.</p>
     <p>It should also be noted that the restrictions specified in this document
would prevent secure (HTTPS) embedees in non-secure (HTTP) embedders from
getting access to permissions. The reason is that the availability of “powerful
features” on non-secure origins is being phased out (see <a data-link-type="biblio" href="#biblio-powerful-features">[powerful-features]</a>).
This means that a top-level embedder would never be able to access a
permission in order to delegate it. This is actually not more restrictive than
what is specified in <a data-link-type="biblio" href="#biblio-powerful-features">[powerful-features]</a>, which requires all ancestor frames
be secure in order for a frame to be considered secure. The restrictions
specified in this document would not result in additional breakages.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="7.2" id="changing-embedee-permissions"><span class="secno">7.2. </span><span class="content">Changing Embedee Permissions</span><a class="self-link" href="#changing-embedee-permissions"></a></h3>
     <p>iframe tags tend to be fairly widely copy/pasted. For example, to make it
easy for developers to embed YouTube videos, YouTube provides a HTML iframe
snippet which can be pasted into a website. Once these snippets have been
deployed, it is hard for embedees to have them changed. For example, if the
permissions required to run YouTube ever changed, it would be impossible for
YouTube to update all of its embedders. While this may be problematic for
embedees, it gives embedders an opportunity to decide whether they really want
the embedee to have access to the permission.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="7.3" id="reduced-user-control"><span class="secno">7.3. </span><span class="content">Reduced User Control</span><a class="self-link" href="#reduced-user-control"></a></h3>
     <p>Some people may want to be able to let an embed<em>ee</em> origin they
consider trustworthy have access to some permissions, but may not want to grant
those same permissions to an embedd<em>er</em> they consider untrustworthy. <a href="#security-considerations">Permission grants adhere to the
embedder</a>, which presents a paradox of control: it seems we can present
people an option to control permissions at a coarse but understandable
granularity; or we can present an option to control permissions at a fine but
confusing granularity. (See <a href="#background-and-motivations">Background And
Motivations</a>.)</p>
     <p>UAs may provide advanced configuration options to mitigate this risk. These
options would place more control back into the hands of users. For example, a
user-controlled whitelist could be used to allow embedees from certain origins
to get permission access without delegation. Alternatively, UAs may have an
option which allows embedees to independently prompt a user for permission but
the decision is not persisted by default. This proposal does not recommend or
require any specific mitigation techniques.</p>
     <p>Composing origins to create more complex web applications is analogous to
application composition from components of different sources on other platforms,
and other platforms also tie the principal to just the top-level application.
(For a definition of the term <em>principal</em>, see <a data-link-type="biblio" href="#biblio-protection-of-information">[protection-of-information]</a>).</p>
     <ul>
      <li>Many Android applications include libraries (often packaged as JARs) from
third parties, but the Android platform treats the embedding package as the
principal, and adheres permission grants to that package. Consider an email
reader, com.example.mail, that includes an IMAP client implemented in a JAR
provided by the Foo Organization, that provides the package org.foo.imap.client.
Android exposes only com.example.mail to the user, gives it a unique Linux UID,
and all permission grants and revocations adhere to com.example.mail. If another
package, e.g. org.messaging.android, also happens to use the org.foo.imap.client
JAR, the JAR does not have the same permissions in both embedding packages.
      <li>Many Windows applications include libraries (often packaged as DLLs) from
third parties. Similar to the Android example, Windows separates privileges by
associating each process with an access token. Processes holding different
tokens are protected from each other, regardless of what DLLs they have loaded
(even if they have loaded some of the same DLLs) and regardless of the source of
those DLLs.
     </ul>
     <p>Neither the Android nor Windows platforms afford the user any fine-grained
control over the permissions available to code that ‘top-level’ applications
depend on. This proposal for the Open Web Platform is consistent with the
existing, analogous behavior on other platforms. Reasonable people may disagree
on whether or not that is a good thing, but advocates for fine-grained control
of dependencies must contend with the problems of user confusion, lack of
context, and warning fatigue that fine-grained control would raise, and has
proven to raise. TODO(palmer): Get a cite from felt or ainslie on reduced
responsiveness to warnings.</p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="acknowledgements"><span class="secno">8. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
    <p>Thanks to Adrienne Porter Felt, Mounir Lamouri, Alex Russell, Ben Wells, and
Mike West for advice and feedback.</p>
   </section>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
  <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="example-f839f6c8">
   <a class="self-link" href="#example-f839f6c8"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
  <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
  <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is equivalent. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#composed-applications">composed applications</a><span>, in §1</span>
   <li><a href="#delegate">delegate</a><span>, in §1</span>
   <li><a href="#dom-permissions-delegate">delegate(permission)</a><span>, in §4.2</span>
   <li><a href="#embedder">embedder</a><span>, in §1</span>
   <li><a href="#embedee">embedee</a><span>, in §1</span>
   <li><a href="#dom-permissions-isdelegated">isDelegated(permission)</a><span>, in §4.2</span>
   <li><a href="#permission">permission</a><span>, in §1</span>
   <li><a href="#dom-htmliframeelement-permissions">permissions</a><span>, in §4.1</span>
   <li><a href="#powerful-feature">powerful feature</a><span>, in §1</span>
   <li><a href="#top-level-embedder">top-level
embedder</a><span>, in §1</span>
   <li><a href="#undelegate">undelegate</a><span>, in §1</span>
   <li><a href="#dom-permissions-undelegate">undelegate(permission)</a><span>, in §4.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio" href="#biblio-whatwg-dom">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#domtokenlist">DOMTokenList</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-document">document</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-doctype-name">name</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-domtokenlist-value">value</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-html">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmliframeelement">HTMLIFrameElement</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context">nested browsing contexts</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-permissions">[permissions]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a>
     <li><a href="https://w3c.github.io/permissions/#permission-registry">PermissionName</a>
     <li><a href="https://w3c.github.io/permissions/#permissions-interface">Permissions</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-powerful-features">[powerful-features]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-service-workers">[service-workers]</a> defines the following terms:
    <ul>
     <li><a href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/#dfn-service-worker">service worker</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Mounir Lamouri; Marcos Caceres. <a href="https://w3c.github.io/permissions/">The Permissions API</a>. 7 April 2015. WD. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-powerful-features">[POWERFUL-FEATURES]
   <dd>Mike West; Yan Zhu. <a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/">Privileged Contexts</a>. 24 April 2015. WD. URL: <a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/">https://w3c.github.io/webappsec/specs/powerfulfeatures/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-service-workers">[SERVICE-WORKERS]
   <dd>Alex Russell; Jungkee Song; Jake Archibald. <a href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/">Service Workers</a>. 25 June 2015. WD. URL: <a href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/">https://slightlyoff.github.io/ServiceWorker/spec/service_worker/</a>
   <dt id="biblio-whatwg-dom">[WHATWG-DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-geolocation-api">[geolocation-API]
   <dd>Andrei Popescu. <a href="http://www.w3.org/TR/geolocation-API/">Geolocation API Specification</a>. 28 May 2015. PER. URL: <a href="http://www.w3.org/TR/geolocation-API/">http://www.w3.org/TR/geolocation-API/</a>
   <dt id="biblio-iframe-permissions-chrome">[IFRAME-PERMISSIONS-CHROME]
   <dd>Raymes Khoury; Chris Palmer. <a href="https://docs.google.com/document/d/1iaocsSuVrU11FFzZwy7EnJNOwxhAHMroWSOEERw5hO0">Simplifying &amp;lt;iframe&amp;gt; Permission Scoping in Chrome</a>. URL: <a href="https://docs.google.com/document/d/1iaocsSuVrU11FFzZwy7EnJNOwxhAHMroWSOEERw5hO0">https://docs.google.com/document/d/1iaocsSuVrU11FFzZwy7EnJNOwxhAHMroWSOEERw5hO0</a>
   <dt id="biblio-iframe-permissions-study">[IFRAME-PERMISSIONS-STUDY]
   <dd>Rebecca Rolfe; Ben Wells; Raymes Khoury. <a href="https://docs.google.com/presentation/d/1suzMhtvMtA11jxPUdH1jL1oPh-82rTymCnslgR3ehEE">Understanding Permission Requests From Iframes: Cafe Study Results</a>. URL: <a href="https://docs.google.com/presentation/d/1suzMhtvMtA11jxPUdH1jL1oPh-82rTymCnslgR3ehEE">https://docs.google.com/presentation/d/1suzMhtvMtA11jxPUdH1jL1oPh-82rTymCnslgR3ehEE</a>
   <dt id="biblio-protection-of-information">[PROTECTION-OF-INFORMATION]
   <dd>Jerome H. Saltzer; Michael D. Schroeder. <a href="http://www.cs.virginia.edu/~evans/cs551/saltzer/">The Protection of Information in Computer Systems</a>. URL: <a href="http://www.cs.virginia.edu/~evans/cs551/saltzer/">http://www.cs.virginia.edu/~evans/cs551/saltzer/</a>
   <dt id="biblio-webrtc">[WEBRTC]
   <dd>Adam Bergkvist; et al. <a href="http://www.w3.org/TR/webrtc/">WebRTC 1.0: Real-time Communication Between Browsers</a>. 28 January 2016. WD. URL: <a href="http://www.w3.org/TR/webrtc/">http://www.w3.org/TR/webrtc/</a>
   <dt id="biblio-whatwg-notifications">[WHATWG-NOTIFICATIONS]
   <dd>Anne van Kesteren. <a href="https://notifications.spec.whatwg.org/">Notifications API Standard</a>. Living Standard. URL: <a href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def">partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmliframeelement">HTMLIFrameElement</a> {
  [PutForwards=<a class="idl-code" data-link-type="attribute" href="https://dom.spec.whatwg.org/#dom-domtokenlist-value">value</a>] readonly attribute <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#domtokenlist">DOMTokenList</a> <a data-readonly="" data-type="DOMTokenList " href="#dom-htmliframeelement-permissions">permissions</a>;
};

[Exposed=(Window,Worker)]
partial interface <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/permissions/#permissions-interface">Permissions</a> {
  Promise&lt;void> <a href="#dom-permissions-delegate">delegate</a>((<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a> or sequence&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a>>) <a href="#dom-permissions-delegate-permission-permission">permission</a>);
  Promise&lt;void> <a href="#dom-permissions-undelegate">undelegate</a>((<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a> or sequence&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a>>) <a href="#dom-permissions-undelegate-permission-permission">permission</a>);
  Promise&lt;boolean> <a href="#dom-permissions-isdelegated">isDelegated</a>(<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#permission-definition">PermissionDescriptor</a> <a href="#dom-permissions-isdelegated-permission-permission">permission</a>);
};

</pre>
<script>
        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            while(el.parentElement) {
                if(el.tagName == "DFN") {
                    target = "dfn";
                    break;
                }
                if(/H\d/.test(el.tagName) && el.getAttribute('data-dfn-type') != null) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn") {
                // open the panel
                var dfnPanel = el.querySelector(".dfn-panel");
                if(dfnPanel) {
                    dfnPanel.classList.add("on");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
            }

        });
        </script>